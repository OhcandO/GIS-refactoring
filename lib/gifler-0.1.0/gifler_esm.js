/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/gifler@0.1.0/gifler.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function e(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var t={};!function t(r,n,a){function i(s,h){if(!n[s]){if(!r[s]){if(!h&&e)return e(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};r[s][0].call(u.exports,(function(e){var t=r[s][1][e];return i(t||e)}),u,u.exports,t,r,n,a)}return n[s].exports}for(var o=e,s=0;s<a.length;s++)i(a[s]);return i}({1:[function(e,t,r){function n(e,t,r,n){for(var a=e[t++],i=1<<a,o=i+1,s=o+1,h=a+1,l=(1<<h)-1,u=0,f=0,d=0,c=e[t++],p=new Int32Array(4096),m=null;;){for(;u<16&&0!==c;)f|=e[t++]<<u,u+=8,1===c?c=e[t++]:--c;if(u<h)break;var v=f&l;if(f>>=h,u-=h,v!==i){if(v===o)break;for(var g=v<s?v:m,w=0,_=g;_>i;)_=p[_]>>8,++w;var x=_;if(d+w+(g!==v?1:0)>n)return void console.log("Warning, gif stream longer than expected.");r[d++]=x;var y=d+=w;for(g!==v&&(r[d++]=x),_=g;w--;)_=p[_],r[--y]=255&_,_>>=8;null!==m&&s<4096&&(p[s++]=m<<8|x,s>=l+1&&h<12&&(++h,l=l<<1|1)),m=v}else s=o+1,l=(1<<(h=a+1))-1,m=null}return d!==n&&console.log("Warning, gif stream shorter than expected."),r}try{r.GifWriter=function(e,t,r,n){var a=0,i=void 0===(n=void 0===n?{}:n).loop?null:n.loop,o=void 0===n.palette?null:n.palette;if(t<=0||r<=0||t>65535||r>65535)throw"Width/Height invalid.";function s(e){var t=e.length;if(t<2||t>256||t&t-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return t}e[a++]=71,e[a++]=73,e[a++]=70,e[a++]=56,e[a++]=57,e[a++]=97;var h=0,l=0;if(null!==o){for(var u=s(o);u>>=1;)++h;if(u=1<<h,--h,void 0!==n.background){if((l=n.background)>=u)throw"Background index out of range.";if(0===l)throw"Background index explicitly passed as 0."}}if(e[a++]=255&t,e[a++]=t>>8&255,e[a++]=255&r,e[a++]=r>>8&255,e[a++]=(null!==o?128:0)|h,e[a++]=l,e[a++]=0,null!==o)for(var f=0,d=o.length;f<d;++f){var c=o[f];e[a++]=c>>16&255,e[a++]=c>>8&255,e[a++]=255&c}if(null!==i){if(i<0||i>65535)throw"Loop count invalid.";e[a++]=33,e[a++]=255,e[a++]=11,e[a++]=78,e[a++]=69,e[a++]=84,e[a++]=83,e[a++]=67,e[a++]=65,e[a++]=80,e[a++]=69,e[a++]=50,e[a++]=46,e[a++]=48,e[a++]=3,e[a++]=1,e[a++]=255&i,e[a++]=i>>8&255,e[a++]=0}var p=!1;this.addFrame=function(t,r,n,i,h,l){if(!0===p&&(--a,p=!1),l=void 0===l?{}:l,t<0||r<0||t>65535||r>65535)throw"x/y invalid.";if(n<=0||i<=0||n>65535||i>65535)throw"Width/Height invalid.";if(h.length<n*i)throw"Not enough pixels for the frame size.";var u=!0,f=l.palette;if(null==f&&(u=!1,f=o),null==f)throw"Must supply either a local or global palette.";for(var d=s(f),c=0;d>>=1;)++c;d=1<<c;var m=void 0===l.delay?0:l.delay,v=void 0===l.disposal?0:l.disposal;if(v<0||v>3)throw"Disposal out of range.";var g=!1,w=0;if(void 0!==l.transparent&&null!==l.transparent&&(g=!0,(w=l.transparent)<0||w>=d))throw"Transparent color index.";if((0!==v||g||0!==m)&&(e[a++]=33,e[a++]=249,e[a++]=4,e[a++]=v<<2|(!0===g?1:0),e[a++]=255&m,e[a++]=m>>8&255,e[a++]=w,e[a++]=0),e[a++]=44,e[a++]=255&t,e[a++]=t>>8&255,e[a++]=255&r,e[a++]=r>>8&255,e[a++]=255&n,e[a++]=n>>8&255,e[a++]=255&i,e[a++]=i>>8&255,e[a++]=!0===u?128|c-1:0,!0===u)for(var _=0,x=f.length;_<x;++_){var y=f[_];e[a++]=y>>16&255,e[a++]=y>>8&255,e[a++]=255&y}a=function(e,t,r,n){e[t++]=r;var a=t++,i=1<<r,o=i-1,s=i+1,h=s+1,l=r+1,u=0,f=0;function d(r){for(;u>=r;)e[t++]=255&f,f>>=8,u-=8,t===a+256&&(e[a]=255,a=t++)}function c(e){f|=e<<u,u+=l,d(8)}var p=n[0]&o,m={};c(i);for(var v=1,g=n.length;v<g;++v){var w=n[v]&o,_=p<<8|w,x=m[_];if(void 0===x){for(f|=p<<u,u+=l;u>=8;)e[t++]=255&f,f>>=8,u-=8,t===a+256&&(e[a]=255,a=t++);4096===h?(c(i),h=s+1,l=r+1,m={}):(h>=1<<l&&++l,m[_]=h++),p=w}else p=x}return c(p),c(s),d(1),a+1===t?e[a]=0:(e[a]=t-a-1,e[t++]=0),t}(e,a,c<2?2:c,h)},this.end=function(){return!1===p&&(e[a++]=59,p=!0),a}},r.GifReader=function(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw"Invalid GIF 87a/89a header.";var r=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,i=e[t++],o=i>>7,s=1<<1+(7&i);e[t++],e[t++];var h=null;o&&(h=t,t+=3*s);var l=!0,u=[],f=0,d=null,c=0,p=null;for(this.width=r,this.height=a;l&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,p=e[t++]|e[t++]<<8,t++;else for(t+=12;0!==(k=e[t++]);)t+=k;break;case 249:if(4!==e[t++]||0!==e[t+4])throw"Invalid graphics extension block.";var m=e[t++];f=e[t++]|e[t++]<<8,d=e[t++],0==(1&m)&&(d=null),c=m>>2&7,t++;break;case 254:for(;0!==(k=e[t++]);)t+=k;break;default:throw"Unknown graphic control label: 0x"+e[t-1].toString(16)}break;case 44:var v=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,x=e[t++],y=x>>6&1,F=h,I=!1;x>>7&&(I=!0,F=t,t+=3*(1<<1+(7&x)));var b=t;for(t++;;){var k;if(0===(k=e[t++]))break;t+=k}u.push({x:v,y:g,width:w,height:_,has_local_palette:I,palette_offset:F,data_offset:b,data_length:t-b,transparent_index:d,interlaced:!!y,delay:f,disposal:c});break;case 59:l=!1;break;default:throw"Unknown gif block: 0x"+e[t-1].toString(16)}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(e){if(e<0||e>=u.length)throw"Frame index out of range.";return u[e]},this.decodeAndBlitFrameBGRA=function(t,a){var i=this.frameInfo(t),o=i.width*i.height,s=new Uint8Array(o);n(e,i.data_offset,s,o);var h=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var u=i.width,f=r-u,d=u,c=4*(i.y*r+i.x),p=4*((i.y+i.height)*r+i.x),m=c,v=4*f;!0===i.interlaced&&(v+=4*r*7);for(var g=8,w=0,_=s.length;w<_;++w){var x=s[w];if(0===d&&(d=u,(m+=v)>=p&&(v=4*f+4*r*(g-1),m=c+(u+f)*(g<<1),g>>=1)),x===l)m+=4;else{var y=e[h+3*x],F=e[h+3*x+1],I=e[h+3*x+2];a[m++]=I,a[m++]=F,a[m++]=y,a[m++]=255}--d}},this.decodeAndBlitFrameRGBA=function(t,a){var i=this.frameInfo(t),o=i.width*i.height,s=new Uint8Array(o);n(e,i.data_offset,s,o);var h=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var u=i.width,f=r-u,d=u,c=4*(i.y*r+i.x),p=4*((i.y+i.height)*r+i.x),m=c,v=4*f;!0===i.interlaced&&(v+=4*r*7);for(var g=8,w=0,_=s.length;w<_;++w){var x=s[w];if(0===d&&(d=u,(m+=v)>=p&&(v=4*f+4*r*(g-1),m=c+(u+f)*(g<<1),g>>=1)),x===l)m+=4;else{var y=e[h+3*x],F=e[h+3*x+1],I=e[h+3*x+2];a[m++]=y,a[m++]=F,a[m++]=I,a[m++]=255}--d}}}}catch(e){}},{}],2:[function(e,t,r){var n,a,i,o,s,h,l,u=function(e,t){return function(){return e.apply(t,arguments)}};a=e("omggif").GifReader,h=function(e){var t;return(t=new XMLHttpRequest).open("GET",e,!0),t.responseType="arraybuffer",{xhr:t,get:function(e){return t.onload=l(e),t.send(),this},animate:function(e){var r;return r=s(e),t.onload=l((function(e){return e.animateInCanvas(r)})),t.send(),this},frames:function(e,r,n){var a;return null==n&&(n=!1),a=s(e),t.onload=l((function(e){return e.onDrawFrame=r,e.animateInCanvas(a,n)})),t.send(),this}}},l=function(e){return function(t){return e(new n(new a(new Uint8Array(this.response))))}},s=function(e){var t,r;if("string"==typeof e&&"CANVAS"===(null!=(r=t=document.querySelector(e))?r.tagName:void 0))return t;if("CANVAS"===(null!=e?e.tagName:void 0))return e;throw new Error("Unexpected selector type. Valid types are query-selector-string/canvas-element")},i=function(e,t,r){var n,a,i;return a=(n=document.createElement("canvas")).getContext("2d"),n.width=e.width,n.height=e.height,(i=a.createImageData(t,r)).data.set(e.pixels),a.putImageData(i,-e.x,-e.y),n},o=function(e,t){var r;return function(){r=[];for(var t=0,n=e.numFrames();0<=n?t<n:t>n;0<=n?t++:t--)r.push(t);return r}.apply(this).map((function(t){var r;return(r=e.frameInfo(t)).pixels=new Uint8ClampedArray(e.width*e.height*4),e.decodeAndBlitFrameRGBA(t,r.pixels),r}))},n=function(){function e(e){var t;this._reader=e,this._advanceFrame=u(this._advanceFrame,this),this._nextFrameRender=u(this._nextFrameRender,this),this._nextFrame=u(this._nextFrame,this),t=this._reader,this.width=t.width,this.height=t.height,this._frames=o(this._reader),this._loopCount=this._reader.loopCount(),this._loops=0,this._frameIndex=0,this._running=!1}return e.prototype.start=function(){return this._lastTime=(new Date).valueOf(),this._delayCompensation=0,this._running=!0,setTimeout(this._nextFrame,0),this},e.prototype.stop=function(){return this._running=!1,this},e.prototype.reset=function(){return this._frameIndex=0,this._loops=0,this},e.prototype._nextFrame=function(){requestAnimationFrame(this._nextFrameRender)},e.prototype._nextFrameRender=function(){var e,t;if(this._running)return e=this._frames[this._frameIndex],null!=(t=this.onFrame)&&t.apply(this,[e,this._frameIndex]),this._enqueueNextFrame()},e.prototype._advanceFrame=function(){this._frameIndex+=1,this._frameIndex>=this._frames.length&&(0!==this._loopCount&&this._loopCount===this._loops?this.stop():(this._frameIndex=0,this._loops+=1))},e.prototype._enqueueNextFrame=function(){var e,t,r,n;for(this._advanceFrame();this._running;){if(r=this._frames[this._frameIndex],t=(new Date).valueOf()-this._lastTime,this._lastTime+=t,this._delayCompensation+=t,e=(n=10*r.delay)-this._delayCompensation,this._delayCompensation-=n,!(e<0)){setTimeout(this._nextFrame,e);break}this._advanceFrame()}},e.prototype.animateInCanvas=function(e,t){var r,n;return null==t&&(t=!0),t&&(e.width=this.width,e.height=this.height),r=e.getContext("2d"),null==this.onDrawFrame&&(this.onDrawFrame=function(e,t,r){return e.drawImage(t.buffer,t.x,t.y)}),null==this.onFrame&&(this.onFrame=(n=this,function(t,a){var o,s;switch(null==t.buffer&&(t.buffer=i(t,n.width,n.height)),"function"==typeof n.disposeFrame&&n.disposeFrame(),t.disposal){case 2:n.disposeFrame=function(){return r.clearRect(0,0,e.width,e.height)};break;case 3:s=r.getImageData(0,0,e.width,e.height),n.disposeFrame=function(){return r.putImageData(s,0,0)};break;default:n.disposeFrame=null}return null!=(o=n.onDrawFrame)?o.apply(n,[r,t,a]):void 0})),this.start(),this},e}(),h.Animator=n,h.decodeFrames=o,h.createBufferCanvas=i,"undefined"!=typeof window&&null!==window&&(window.gifler=h),null!=t&&(t.exports=h)},{omggif:1}]},{},[2]);export{t as default};
//# sourceMappingURL=/sm/4c473728084c30713ff6b57efafb12c0fdf0ee2011bf6ef82f3da3ec830edc52.map